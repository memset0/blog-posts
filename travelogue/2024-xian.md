---
sync: /travelogue/2024-xian.md
title: '2024 ICPC EC-Final 游记'
date: 2025-01-23 13:53:53
publish: false
cover: https://img.memset0.cn/2024/12/30/DF4y80oK.jpeg
travelogue-title: '2024 · 西安'
travelogue-publish: false
---

## Day -1

出发日，还得做完最后一次大物实验再出发！

一上飞机，疲惫感席卷而来。我开始单曲循环崔健的《一无所有》，本想靠摇滚提振一下精神，结果听着听着渐渐睡着了。

醒来发现队友 @add10k 在玩 Slay the Spire 的观者，逐渐从看队友操作变成喷队友操作：怎么有火焰纹 $\rightarrow$ 暴怒 $\rightarrow$ 攻击的打法的，活生生摁亏 5 点！

![自己没拍，偷一张队友的图|md](https://img.memset0.cn/2024/12/30/0JvoCuKD.jpeg)

## Day 0

一觉醒来到了中午，@YLWang 和 @wlzhouzhuan 招呼我们去一家附近的“张伟羊肉火锅”。从宾馆骑自行车前往，放眼望去道路两侧都是田地，快到目的地了才有一些商业街的雏形。

![|md](https://img.memset0.cn/2024/12/30/aqtDrFRA.jpeg)

下午去热身赛报道了一下，

热身赛结束以后又进入了觅食阶段。西工大附近也有块商业区，要是再往出走则又是田地了。旁边杭电的同学一直在唠叨刘老师（杭电教练）讲的“学长西安赛前吃烧烤进医院”故事，故而我们试图找一家看起来能保障食品安全的店铺解决晚餐。

![紫砂烤梨|md](https://img.memset0.cn/2024/12/30/mnudYVk3.png)

![老八面馆|md](https://img.memset0.cn/2024/12/30/fRR2V71U.jpeg)

一路上路过各种模因（meme）丰富的店铺，最后走进了一家羊肉泡馍，没想到踩了大雷。不说羊肉泡馍本身做的一塌糊涂一股工业味，在强调了 n 次不辣以后上上来的菜一个比一个辣，也是给整无语了。

![QQ图片20241230093036](https://img.memset0.cn/2024/12/30/ta5DFecN.jpeg)

## Day 1

考试前的一晚总是不得安睡。起床以后稍微调整了一番，勉强恢复了平和的心态进入考场。

开场 @xryjr233 是倒开的，读完 L 这个数据结构题先我说了下题意和初步想法（伏笔 1），这时候 @add10k 说会 A 了，遂让他先上来写，@xryjr233 跟榜想 I。

想了一下 L 发现不好做（手里有的性质还不够），又去读了下 E，发现是个用来恶心人的大模拟，有机时就能写，这时候队友说 I 题不会丢给我了，想一下会了。刚好 A 题 WA 了，遂上机写 I。过了以后队友也发现了 A 题的错误，上来把 A 过了。

刚准备上去写 E，@xryjr233 跟我们说会了 K（榜上 0AC），我觉得也是神人了（伏笔 2）。他说写起来并不复杂，就让他先写，结果调了调直接 1A 了，还拿了一血。（我还能说什么，徐老师牛逼！）然后就是我上去写 E 了，这时的榜是 G 过一车，F / H 有人在做，两位队友去看这几题。

交了发 E WA 了， @add10k 说会 F 了， 但是 G 没有一个很确定的想法（只是猜想了一下最多做 $\log$ 次除以 $A$，事实证明是错误的）。遂让 @add10k 上来写 F，交了一下也 WA 了，不过很快发现是全 0 的情况输出 $\text{F}$ 没特判，改了就过了。这其间我也发现了三个自己 E 题的错误，爆了 3 发终于过了。

这时候 @xryjr233 上去写 G，我继续想 L 题。我觉得如果只是按照 $\sum \text{mex} = O(n \log n)$ 的均摊并不够做，至少是没有办法 polylog 的维护，需要带根号；不过我很快发现个更强的性质，就是 $\sum \text{连续段贡献 mex 的次数}$ 也是均摊 $O(n \log n)$ 的，也就是说处理 2 操作时只需要暴力地把每个“最小值连续段”都拎出来统计（如果会贡献答案就临时将其 $+=\infty$ 否则就找到了 $\text{mex}$），而这只需要写一个区间加区间覆盖区间求 min 连续段区间求和的线段树即可。

这时候 G WA 了，我上去写 L，还安慰队友说这题肯定是清北队伍把榜带歪了。一气呵成直接过了样例，在队友的怂恿下交了一发果然 WA 了。还好对拍好写，稍微拍了下发现是打区间覆盖标记的时没有清空区间加标记，改了下就过了。

接着和队友一起鏖战 G，发现我们的结论怎么都对不了一点。一看场上过了 150 多个，也是红温了。两队友在我写 L 的时候已经想了半天还找不到正确的结论，又上机写暴力找规律。我想自己上机写个暴力验证是否只有一个环，写完顺手跑了个 $A=7,B=5$ 的情况，没想到直接瞪出来了结论（样例是两组 $A=2,B=1$ 和 $A=314,B=285$ 的，根本不好看规律）。队友用这个规律写了下就过了。

这时刚好进入封榜了（最后一个小时），我们在 C 和 H 之间还是选择开过的人多的 H 题。猜了个要么放左上角要么放右下角的结论把队友 @xryjr233 赶上去写 DP，这时候做了个关键的决策——在旁边看着他写（伏笔 3）。因为 @xryjr233 虽然是抗压仙人 + 动态规划仙人，但也有过把 DP 数组开成 `char` 的轶事。

写完发现样例都过不去，因为除了这两种情况还可以把放在中间。这时 @add10k 提出了一种没放一个就切掉不能放的部分的贪心状物做法，然后他俩重新写这个，交了发果然 WA 了。我是觉得贪心怎么都不可能对，就盯着 DP 接着想，发现改一个参数刚好可以处理放右下角放中间的情况，可是交了发又 WA。

这时队友提出来了个鬼点子（伏笔 4），把两份错误的代码对拍。因为我们两份代码的错误点只是并非找到了最优，故每次拍挂至少能确定其中一份代码是错的。对着一个拍出来的数据，我忽然发现 @xryjr233 一开始的 DP 代码没法处理左上角放中间的情况（即如果前一个放的右下，则下一个如果放左侧即使不是个角也可以放）。但我刚好想到了一个简单的更改，让他的 DP 支持这一功能，没想到改了下直接过了！

又回去研究了一下榜，发现 @Afterlife 队封榜后交了 2 个，都过了的话我们会输罚时。又研究了一下 C，发现就是一个恶心人的题，不涉及到什么算法，剩下的 30 分钟根本写不完。遂举队摆烂。我溜到门口等待比赛结束，准备一路跑去企业宣讲现场领奖品。

就在跑路时候听说 @Afterlife 的 L 没过，那疑似是锁定季军了，我的心情也是激动到了极点。此时满脑子都是 showmaker 的圣经——“如果再给我一次 EC Final 的机会，我一定会赢下所有！”。

企业宣讲结束后跟着面基群里的网友们一起出去吃饭。路上听说大家的 L 是用十万种复杂度过的，数据是随的没有卡掉（不过听起来都比我的做法要难写，不亏！）。最后群友选了一家牛肉自助火锅，食材新鲜，价格实惠，也是大快朵颐了一番。

![](https://img.memset0.cn/2024/12/30/V2nnEmYC.jpeg)

吃完饭后例行的赛博合照环节，由于现场没有合适的桌子，遂 issue 了一手按照 C 题的某种 $2 \times 2$ 的解 $\displaystyle{\begin{bmatrix}\text{N}&\text{E}\\\text{W}&\text{S}\end{bmatrix}}$ 摆放椅子。

![](https://img.memset0.cn/2024/12/30/KurZHTzq.jpeg)

回到酒店清点了一波战利品，虽然没有抽中小米 su7 <small>的车模</small>，但能抢到 @非凸科技 的大 fufu 我已经很开心了（感谢在朋友圈帮我凑点赞数的朋友们~）。

![](https://img.memset0.cn/2024/12/30/vo7FwvEC.jpeg)

## Day 2

![张学良，西安，很合理吧！](https://img.memset0.cn/2024/12/30/zNiDSUhl.jpeg)

滚榜的流程还比较整蛊，台上的主持人特别喜欢“很遗憾”。拿银奖说一句很遗憾，拿金奖也说很遗憾。上交同学的队伍甚至队名都被忽略了，念成了“上海交通大学 很遗憾”队伍。

![|md](https://img.memset0.cn/2024/12/30/DF4y80oK.jpeg)

捧着手里的奖杯也是感慨万千。本场比赛总的来说还是运气 > 实力的，特别是几个无心之举，都成了关键的伏笔。也特别感谢我的队友两个赛季的陪伴与信任，希望我们能有一天一起登上更高的舞台！

晚上去参加了一下华为晚宴，弥补去年赶着回去期末考而未能参加的遗憾。但这菜品实在太难吃了啊喂，多半还是辣的，吃完肚子反而咕咕叫，去旁边找了家茶餐厅和烧烤店吃了下半场。

![|md](https://img.memset0.cn/2025/01/29/8n3wo9uY.jpeg)

抽奖也是非常的倒霉，算上参与奖理论中奖率应该有 $50\%$ 以上才对。感谢月球猫猫队临走前把奖券送我们了，可惜就这样还是没中（哭）。

## Day 3

天没亮就赶去机场了。凌晨五点钟打车不好打，打到了一辆烟味极重的出租车，我在一路上熏得差点吐出来。出租车司机一路咳嗽，我回来以后直接高烧了三天，去医院一查果然是中了甲流，这直接毁掉了我的期末复习……

![|md](https://img.memset0.cn/2024/12/30/0loDjvf6.jpeg)

总的来说还是很喜欢这次旅程。再见西安，有缘再会！

---
title: Ch6 Counting
sync: /course/dm/note/5.md
date: 2024-04-02 11:12:57
---

## 1. 计数原理 Counting Principles

### 1.1. 加法原理 The Sum Rule

**加法原理(the sum rule)**：If $S$ and $T$ are **不相交的(disjoint)** finite sets, then

$$
|S\cup T| = |S| +|T|
$$

### 1.2. 乘法原理 The Product Rule

**乘法原理(the product rule)**：If $S$ and $T$ are finite sets, then

$$
|S \times T| = |S| \times |T|
$$

Here $S \times T$ denotes the Cartesian product of sets $S$ and $T$.

### 1.3. 容斥原理 The Inclusion-Exclusion principle

**容斥原理(the inclusion-exclusion principle = subtraction rule)**：If $S$ and $T$ are finite sets, then

$$
|S\cup T| = |S| + |T| - |S\cap T|
$$

### 1.4. 树形图 Tree Diagrams

一种用**树形图(tree diagram)** 来计数的思想：To use trees in counting, we use a branch to represent each possible choice. We represent the possible outcomes by the leaves.

> [!example] Chapter 6.1 - Example 9
>
> How many bit strings of length four do not have two consecutive 1s?
>
> > [!quote]- Solution
> > ![|320](https://static.memset0.cn/img/v6/2024/04/07/8n9QNU4U.png)
> > There are $8$ bit strings of length four without two consecutive 1s.

## 2. 鸽笼原理 The Pigeonhole Principle

> [!important] **鸽笼原理(the pigeonhold principle)**
>
> If $k$ is a positive integer and $k+1$ or more objects are placed into $k$ boxes, then there is at least one box containing two or more of the objects.

> [!important] **广义鸽笼原理(the generalized pigeonhole principle)**
>
> If $n$ objects are placed into $k$ boxes, then there is at least one box containing at least $\lceil n/k \rceil$ objects.

> [!example] Chapter 6.2 - Example 6
>
> Every sequence of $n^2+1$ distinct integers contains a subsequence of length $n + 1$ that is either strictly increasing or strictly decreasing.
>
> > [!quote]- Solution by myself
> > Dilworth 定理指出，对于任意有限偏序集，其最长反链长度必等于最小链划分中链的数目。故命题“最长上升子序列的长度为 $n$” 的对偶命题为“非升子序列的最小划分数为 $n$”。
> >
> > 对于原数列，若其最长上升子序列的大于等于 $n+1$，则问题解决；否则存在一组 $n$ 个下降子序列的划分。根据鸽笼原理，其中至少有一个的长度大于 $n$，即可找到一个长度大于等于 $n+1$ 的下降子序列。
>
> > [!quote]- Solution by teacher
> >
> > ![|500](https://static.memset0.cn/img/v6/2024/04/07/lARFh590.png)
> >
> > ![|500](https://static.memset0.cn/img/v6/2024/04/07/hxBsNyp7.png)

## 3. 排列组合 Permutations and Combinations

### 3.1. 排列 Permutations

A **排列(permutation)** of a set of _distinct_ objects is an _ordered_ arrangement of these objects.

An r-permutation is an _ordered_ arrangement of $r$ elements of a set, denoted by $P(n,r)$.

$$
P(n,r) = {n\times (n-1)\times \cdots \times (n-r+1)}
$$

### 3.2. 组合 Combination

A r-**组合(combination)** of elements of a set is an _unordered_ selection of $r$ elements from the set, denoted by $C(n,r) = \displaystyle\binom n r$.

$$
C(n,r) = \frac{P(n,r)}{P(r,r)} = \frac{n\times (n-1)\times \cdots \times (n-r+1)}{r\times (r-1)\times \cdots \times 1}
$$

### 3.3. 组合证明 Combinatorial Proofs

A **数两次的证明方法(double counting proof)** uses counting arguments to prove that both sides of an identity count the same objects, but in different ways.

A **基于双射的证明方法(bijective proof)** shows that there is a bijection between the sets of objects counted by the two sides of the identity.

> [!example]- 证明：$C(n,r)=C(n,n-r)$
>
> ![|540](https://static.memset0.cn/img/v6/2024/04/09/KoYDr1Fd.png)

### 3.4. 组合恒等式 Combinatorial Indentities

> [!important] Theorem 1: **二项式定理(the binomial theorem)**
>
> Let $x$ and $y$ be variables, and let $n$ be a nonegative integer. Then
>
> $$
> (x+y)^n = \sum_{j=0}^n \binom{n}{j} x^{n-j} y^j
> $$

可以得到以下推论：

$$
\sum_{k=0}^n \binom{n}{k} = 2^n
$$

$$
\sum_{k=0}^n (-1)^k \binom {n}{k} = 0
$$

> [!important] Theorem 2: **帕斯卡恒等式(PASCAL's identity)**
>
> Let $n$ and $k$ be positive integers with $k\le n$. Then
>
> $$
> \binom{n+1}{k}=\binom{n}{k-1}+\binom{n}{k}
> $$

> [!important] Theorem 3: **范德蒙德恒等式(Vandermonde's indentity)**
>
> Let $m,n$ and $r$ be nonnegative integer with $r$ not exceeding either $m$ or $n$. Then
>
> $$
> \binom{m+n}{r} = \sum_{k=0}^r \binom{m}{r-k}\binom{n}{k}
> $$

可以得到以下推论：

$$
\binom{2n}{n} = \sum_{k=0}^n \binom{n}{k}^2
$$

> [!important] Theorem 4
> Let $n$ and $r$ be nonnegative integer with $r \le n$. Then
>
> $$
> \binom{n+1}{r+1} = \sum_{j=r}^n\binom{j}{r}
> $$

## 4. 广义排列组合 Generalized Permutations and Combinations

### 允许重复的排列组合问题 Permutation and Combination with Repetition

**$r$-permutation with repetition**：The number of $r$-permutations of a set of $n$ objects with repetition allowed is

$$
n^r
$$

**$n$-permutation with limited repetition**：The number of different permutations of $n$ objects, where there are $n_1$ indistinguishable objects of type1, …, and $n_k$ indistinguishable objects of type $k$, is

$$
\frac{n!}{n_1!n_2!\cdots n_k!}
$$

**$r$-circle permutation**：The number of $r$-circle permutations of a set of $n$ objects is

$$
\frac{P(n,r)}{r}
$$

![|280](https://static.memset0.cn/img/v6/2024/04/09/sZRkbD1Z.png)

**$r$-combination with repetition**：The number of $r$-combination from a set with $n$ elements when repetition of elements is allowed is

$$
\binom{n+r-1}{r}
$$

这个就是隔板法大家懂的都懂。

### 关于小球盒子的问题 Distributing Objects into Boxes

**Distinguishable objects and distinguishable boxes**：The number of ways to distribute $n$ distinguishable objects into $k$ distinguishable boxes so that $n_i$ objects are place into box $i$, $i=1,2,\cdots,k$, equals

$$
\frac{n!}{n_1! n_2! \cdots n_k!}
$$

**Distinguishable objects and indistinguishable boxes**：The number of ways to distribute $n$ distinguishable objects into $k$ indistinguishable boxes is

$$
\sum_{j=1}^k S(n,j) = \sum_{j=1}^k \left( \sum_{i=0}^{j-1} \binom{i}{j} \frac{(-1)^i (j-i)^n}{j!}  \right)
$$

需要引入第二类斯特林数，下文再详细介绍。

**Indistinguishable objects and distinguishable boxes**：The number of ways to distribute $n$ indistinguishable objects into $k$ distinguishable boxes is

$$
\binom{n-1}{k-1}
$$

还是使用隔板法。

**Indistinguishable objects and indistinguishable boxes**：The number of ways to distribute $n$ indistinguishable objects into $k$ indistinguishable boxes is

